<table id="chess_board" cellpadding="0" cellspacing="0" data-game-url= "<%= pawn_promotion_path(game.id) %>"  >
    <% (-1..7).reverse_each do |y| %>
      <tr>
      <% (0..8).reverse_each do |x| %>
        <% if y == -1 %>
          <% if x== 8 %>
            <th></th>
          <% else %>
            <th class="letter_header"><%= row_letters.shift %></th>    
          <% end %>
        <% elsif x == 8 %> 
          <th class="number_header"><%= row_numbers.pop %></th>
        <% else %>
          <% if chess_piece(x,y,game).nil? %>
            <% if y == 7 && x == 0 %>
              <td class="square top_right" data-x-coord=<%= x %> data-y-coord=<%= y %>></td>
            <% elsif y == 7 %>
              <td class="square top_row" data-x-coord=<%= x %> data-y-coord=<%= y %>></td>
            <% elsif x == 0 %>
              <td class="square right_column" data-x-coord=<%= x %> data-y-coord=<%= y %>></td>
            <% else %>
              <td class="square" data-x-coord=<%= x %> data-y-coord=<%= y %>></td>
            <% end %>
          <% else %>
            <% if y == 7 && x == 0 %>
              <td class="square top_right" data-x-coord=<%= x %> data-y-coord=<%= y %>>
                <div class="pieces" data-update-url="<%= piece_path chess_piece(x,y,game) %>" data-piece-id="<%= chess_piece(x, y, game).id %>"><%= image_tag(chess_piece(x, y, game).image_name) %></div>     
              </td>
            <% elsif y == 7 %>
              <td class="square top_row" data-x-coord=<%= x %> data-y-coord=<%= y %>>
                <div class="pieces" data-update-url="<%= piece_path chess_piece(x,y,game) %>" data-piece-id="<%= chess_piece(x, y, game).id %>"><%= image_tag(chess_piece(x, y, game).image_name) %></div>
              </td>
            <% elsif x == 0 %>
              <td class="square right_column" data-x-coord=<%= x %> data-y-coord=<%= y %>>
                <div class="pieces" data-update-url="<%= piece_path chess_piece(x,y,game) %>" data-piece-id="<%= chess_piece(x, y, game).id %>"><%= image_tag(chess_piece(x, y, game).image_name) %></div>
              </td>
            <% else %>
              <td class="square" data-x-coord=<%= x %> data-y-coord=<%= y %>>
                <div class="pieces" data-update-url="<%= piece_path chess_piece(x,y,game) %>" data-piece-id="<%= chess_piece(x, y, game).id %>"><%= image_tag(chess_piece(x, y, game).image_name) %></div>
              </td>
            <% end %>
          <% end %>
        <% end %>
      <% end %>
      </tr>
    <% end %>
</table>
